<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org"
      data-th-replace="~{layouts/layout :: layout-encheres(
					titrePage=~{:: title},
					contenuPage=~{:: main},
					ressourcesSupp=~{})}">
<title>Nouvelle Vente</title>
<link rel="stylesheet" th:href="@{/css/styles.css}">

<th:block id="ressources-css">
    <link rel="stylesheet" data-th-href="@{/css/demo-form.css}" />
    <link rel="stylesheet" data-th-href="@{/css/demo-error.css}" />
    <link rel="stylesheet" data-th-href="@{/css/styles.css}">
</th:block>
<main>
    <div class="custom-form">
        <h1>Nouvelle Vente</h1>
        <table>
            <tbody>
        <form action="/soumettre-article" method="post"
            <label for="nom_article">Nom de l'article:</label><br>
            <input type="text" id="nom_article" name="nom_article" required><br>

            <label for="description">Description:</label><br>
            <textarea id="description" name="description" rows="4" cols="50" required></textarea><br>

        <select>
            <option th:each="category : ${categorie}" th:value="${category.noCategorie}" th:text="${category.libelle}"></option>
        </select>
        <br>
        <br>

            <label for="prix_initial">Prix initial:</label><br>
            <select id="prix_initial" name="prix_initial">
                <!-- Options pour les prix initial générées dynamiquement par JavaScript -->
            </select><br>

            <label for="date_debut_encheres">Date de début des enchères:</label><br>
            <input type="date" id="date_debut_encheres" name="date_debut_encheres" required><br>

            <label for="date_fin_encheres">Date de fin des enchères:</label><br>
            <input type="date" id="date_fin_encheres" name="date_fin_encheres" required><br>

            <br>

            <h3>Informations de retrait</h3>
            <label for="rue">Rue:</label><br>
            <input type="text" id="rue" name="rue" required><br>

            <label for="code_postal">Code postal:</label><br>
            <input type="text" id="code_postal" name="code_postal" required><br>

            <label for="ville">Ville:</label><br>
            <input type="text" id="ville" name="ville" required><br><br>

            <input type="submit" value="Soumettre">
        <div>
            <!-- Affichage des informations de l'utilisateur -->
            <p>Nom: <span th:text="${UtilisateurEnSession.nom}"></span></p>
            <p>Prénom: <span th:text="${UtilisateurEnSession.prenom}"></span></p>
            <p>Email: <span th:text="${UtilisateurEnSession.email}"></span></p>
            <!-- Ajoutez d'autres informations de l'utilisateur si nécessaire -->
        </div>
        </form>
        <script>
            // Générer les options pour la liste déroulante du prix initial
            var selectPrixInitial = document.getElementById("prix_initial");

            for (var prix = 0; prix <= 100000; prix += 5 ) {
                var option = document.createElement("option");
                option.text = prix;
                option.value = prix;
                selectPrixInitial.appendChild(option);

                var currentDate = new Date();
                var currentDateString = currentDate.toISOString().split('T')[0]; // Format YYYY-MM-DD

                document.getElementById("date_debut_encheres").value = currentDateString;
                document.getElementById("date_fin_encheres").value = currentDateString;
            }
        </script>
            </tbody>
        </table>
    </div>
</main>
</html>
